

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>è¯„æµ‹ &mdash; æ˜‡è…¾å¼€æº  æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/custom.css?v=f2aa3e58" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../_static/documentation_options.js?v=7d86a446"></script>
      <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../../../_static/package_info.js?v=2b3ed588"></script>
      <script src="../../../../../../_static/statistics.js?v=da671b53"></script>
      <script src="../../../../../../_static/translations.js?v=beaddf03"></script>
      <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../../../../../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html" class="icon icon-home">
            æ˜‡è…¾å¼€æº
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">ğŸ å¼€å§‹ä½¿ç”¨</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ascend/quick_install.html">å¿«é€Ÿå®‰è£…æ˜‡è…¾ç¯å¢ƒ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ—ï¸  åŸºç¡€è®¾æ–½ä¸æ¡†æ¶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../accelerate/index.html">Accelerate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../deepspeed/index.html">DeepSpeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../kernels/index.html">kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pytorch/index.html">PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../transformers/index.html">Transformers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ§  è®­ç»ƒä¸å¾®è°ƒæ¡†æ¶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../LLaMA-Factory/index.html">LLaMA-Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ms-swift/index.html">ms-swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../roll/index.html">ROLL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../torchtitan/index.html">TorchTitan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../trl/index.html">Transformer Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../VeOmni/index.html">VeOmni</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../verl/index.html">verl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸš€ æ¨ç†ä¸æœåŠ¡</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../llama_cpp/index.html">Llama.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lm_deploy/index.html">LMDeploy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../onnxruntime/index.html">ONNX Runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sentence_transformers/index.html">Sentence Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sglang/index.html">SGLang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../torchchat/index.html">Torchchat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ¨ å¤šæ¨¡æ€ã€åº”ç”¨ä¸è¯„æµ‹</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Diffusers/index.html">Diffusers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lm_evaluation/index.html">LM-Evalution-Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../open_clip/index.html">open_clip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../opencompass/index.html">OpenCompass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../opencv/index.html">OpenCV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sd_webui/index.html">Stable-Diffusion-WebUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../timm/index.html">timm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../wenet/index.html">WeNet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../whisper_cpp/index.html">Whisper.cpp</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">æ˜‡è…¾å¼€æº</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">è¯„æµ‹</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/sources/_generated/sources/ms-swift/source/Instruction/Evaluation.md.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>è¯„æµ‹<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h1>
<p>SWIFTæ”¯æŒäº†evalï¼ˆè¯„æµ‹ï¼‰èƒ½åŠ›ï¼Œç”¨äºå¯¹åŸå§‹æ¨¡å‹å’Œè®­ç»ƒåçš„æ¨¡å‹ç»™å‡ºæ ‡å‡†åŒ–çš„è¯„æµ‹æŒ‡æ ‡ã€‚</p>
<section id="id2">
<h2>èƒ½åŠ›ä»‹ç»<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h2>
<p>SWIFTçš„evalèƒ½åŠ›ä½¿ç”¨äº†é­”æ­ç¤¾åŒº<a class="reference external" href="https://github.com/modelscope/eval-scope">è¯„æµ‹æ¡†æ¶EvalScope</a>ï¼Œå¹¶è¿›è¡Œäº†é«˜çº§å°è£…ä»¥æ”¯æŒå„ç±»æ¨¡å‹çš„è¯„æµ‹éœ€æ±‚ã€‚</p>
<blockquote>
<div><p>æ³¨æ„ï¼šEvalScopeæ”¯æŒè®¸å¤šå…¶ä»–çš„å¤æ‚èƒ½åŠ›ï¼Œä¾‹å¦‚<a class="reference external" href="https://evalscope.readthedocs.io/zh-cn/latest/user_guides/stress_test/quick_start.html">æ¨¡å‹çš„æ€§èƒ½è¯„æµ‹</a>ï¼Œè¯·ç›´æ¥ä½¿ç”¨EvalScopeæ¡†æ¶ã€‚</p>
</div></blockquote>
<p>ç›®å‰æˆ‘ä»¬æ”¯æŒäº†<strong>æ ‡å‡†è¯„æµ‹é›†</strong>çš„è¯„æµ‹æµç¨‹ï¼Œä»¥åŠ<strong>ç”¨æˆ·è‡ªå®šä¹‰</strong>è¯„æµ‹é›†çš„è¯„æµ‹æµç¨‹ã€‚å…¶ä¸­<strong>æ ‡å‡†è¯„æµ‹é›†</strong>ç”±ä¸‰ä¸ªè¯„æµ‹åç«¯æä¾›æ”¯æŒï¼š</p>
<p>ä¸‹é¢å±•ç¤ºæ‰€æ”¯æŒçš„æ•°æ®é›†åç§°ï¼Œè‹¥éœ€äº†è§£æ•°æ®é›†çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚è€ƒ<a class="reference external" href="https://evalscope.readthedocs.io/zh-cn/latest/get_started/supported_dataset/index.html">æ‰€æœ‰æ”¯æŒçš„æ•°æ®é›†</a></p>
<ol>
<li><p>Nativeï¼ˆé»˜è®¤ï¼‰ï¼š</p>
<p>ä¸»è¦æ”¯æŒçº¯æ–‡æœ¬è¯„æµ‹ï¼ŒåŒæ—¶<strong>æ”¯æŒ</strong>è¯„æµ‹ç»“æœå¯è§†åŒ–</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;arc&#39;, &#39;bbh&#39;, &#39;ceval&#39;, &#39;cmmlu&#39;, &#39;competition_math&#39;,
&#39;general_qa&#39;, &#39;gpqa&#39;, &#39;gsm8k&#39;, &#39;hellaswag&#39;, &#39;humaneval&#39;,
&#39;ifeval&#39;, &#39;iquiz&#39;, &#39;mmlu&#39;, &#39;mmlu_pro&#39;,
&#39;race&#39;, &#39;trivia_qa&#39;, &#39;truthful_qa&#39;
</pre></div>
</div>
</li>
<li><p>OpenCompassï¼š</p>
<p>ä¸»è¦æ”¯æŒçº¯æ–‡æœ¬è¯„æµ‹ï¼Œæš‚<strong>ä¸æ”¯æŒ</strong>è¯„æµ‹ç»“æœå¯è§†åŒ–</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;obqa&#39;, &#39;cmb&#39;, &#39;AX_b&#39;, &#39;siqa&#39;, &#39;nq&#39;, &#39;mbpp&#39;, &#39;winogrande&#39;, &#39;mmlu&#39;, &#39;BoolQ&#39;, &#39;cluewsc&#39;, &#39;ocnli&#39;, &#39;lambada&#39;,
&#39;CMRC&#39;, &#39;ceval&#39;, &#39;csl&#39;, &#39;cmnli&#39;, &#39;bbh&#39;, &#39;ReCoRD&#39;, &#39;math&#39;, &#39;humaneval&#39;, &#39;eprstmt&#39;, &#39;WSC&#39;, &#39;storycloze&#39;,
&#39;MultiRC&#39;, &#39;RTE&#39;, &#39;chid&#39;, &#39;gsm8k&#39;, &#39;AX_g&#39;, &#39;bustm&#39;, &#39;afqmc&#39;, &#39;piqa&#39;, &#39;lcsts&#39;, &#39;strategyqa&#39;, &#39;Xsum&#39;, &#39;agieval&#39;,
&#39;ocnli_fc&#39;, &#39;C3&#39;, &#39;tnews&#39;, &#39;race&#39;, &#39;triviaqa&#39;, &#39;CB&#39;, &#39;WiC&#39;, &#39;hellaswag&#39;, &#39;summedits&#39;, &#39;GaokaoBench&#39;,
&#39;ARC_e&#39;, &#39;COPA&#39;, &#39;ARC_c&#39;, &#39;DRCD&#39;
</pre></div>
</div>
</li>
<li><p>VLMEvalKit:</p>
<p>ä¸»è¦æ”¯æŒå¤šæ¨¡æ€è¯„æµ‹ï¼Œæš‚<strong>ä¸æ”¯æŒ</strong>è¯„æµ‹ç»“æœå¯è§†åŒ–</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>&#39;COCO_VAL&#39;, &#39;MME&#39;, &#39;HallusionBench&#39;, &#39;POPE&#39;, &#39;MMBench_DEV_EN&#39;, &#39;MMBench_TEST_EN&#39;, &#39;MMBench_DEV_CN&#39;, &#39;MMBench_TEST_CN&#39;,
&#39;MMBench&#39;, &#39;MMBench_CN&#39;, &#39;MMBench_DEV_EN_V11&#39;, &#39;MMBench_TEST_EN_V11&#39;, &#39;MMBench_DEV_CN_V11&#39;,
&#39;MMBench_TEST_CN_V11&#39;, &#39;MMBench_V11&#39;, &#39;MMBench_CN_V11&#39;, &#39;SEEDBench_IMG&#39;, &#39;SEEDBench2&#39;,
&#39;SEEDBench2_Plus&#39;, &#39;ScienceQA_VAL&#39;, &#39;ScienceQA_TEST&#39;, &#39;MMT-Bench_ALL_MI&#39;, &#39;MMT-Bench_ALL&#39;,
&#39;MMT-Bench_VAL_MI&#39;, &#39;MMT-Bench_VAL&#39;, &#39;AesBench_VAL&#39;, &#39;AesBench_TEST&#39;, &#39;CCBench&#39;, &#39;AI2D_TEST&#39;, &#39;MMStar&#39;,
&#39;RealWorldQA&#39;, &#39;MLLMGuard_DS&#39;, &#39;BLINK&#39;, &#39;OCRVQA_TEST&#39;, &#39;OCRVQA_TESTCORE&#39;, &#39;TextVQA_VAL&#39;, &#39;DocVQA_VAL&#39;,
&#39;DocVQA_TEST&#39;, &#39;InfoVQA_VAL&#39;, &#39;InfoVQA_TEST&#39;, &#39;ChartQA_TEST&#39;, &#39;MathVision&#39;, &#39;MathVision_MINI&#39;,
&#39;MMMU_DEV_VAL&#39;, &#39;MMMU_TEST&#39;, &#39;OCRBench&#39;, &#39;MathVista_MINI&#39;, &#39;LLaVABench&#39;, &#39;MMVet&#39;, &#39;MTVQA_TEST&#39;,
&#39;MMLongBench_DOC&#39;, &#39;VCR_EN_EASY_500&#39;, &#39;VCR_EN_EASY_100&#39;, &#39;VCR_EN_EASY_ALL&#39;, &#39;VCR_EN_HARD_500&#39;,
&#39;VCR_EN_HARD_100&#39;, &#39;VCR_EN_HARD_ALL&#39;, &#39;VCR_ZH_EASY_500&#39;, &#39;VCR_ZH_EASY_100&#39;, &#39;VCR_ZH_EASY_ALL&#39;,
&#39;VCR_ZH_HARD_500&#39;, &#39;VCR_ZH_HARD_100&#39;, &#39;VCR_ZH_HARD_ALL&#39;, &#39;MMDU&#39;, &#39;MMBench-Video&#39;, &#39;Video-MME&#39;
</pre></div>
</div>
</li>
</ol>
</section>
<section id="id3">
<h2>ç¯å¢ƒå‡†å¤‡<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>ms-swift<span class="o">[</span>eval<span class="o">]</span><span class="w"> </span>-U
</pre></div>
</div>
<p>æˆ–ä»æºä»£ç å®‰è£…ï¼š</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/modelscope/ms-swift.git
<span class="nb">cd</span><span class="w"> </span>ms-swift
pip<span class="w"> </span>install<span class="w"> </span>-e<span class="w"> </span><span class="s1">&#39;.[eval]&#39;</span>
</pre></div>
</div>
</section>
<section id="id4">
<h2>è¯„æµ‹<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h2>
<p>æ”¯æŒçº¯æ–‡æœ¬è¯„æµ‹ã€å¤šæ¨¡æ€è¯„æµ‹ã€urlè¯„æµ‹ã€è‡ªå®šä¹‰æ•°æ®é›†è¯„æµ‹å››ç§æ–¹å¼</p>
<p><strong>åŸºæœ¬ç¤ºä¾‹</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
swift<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model<span class="w"> </span>Qwen/Qwen2.5-0.5B-Instruct<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_backend<span class="w"> </span>Native<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--infer_backend<span class="w"> </span>transformers<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_limit<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset<span class="w"> </span>gsm8k
</pre></div>
</div>
<p>å…¶ä¸­:</p>
<ul class="simple">
<li><p>model: å¯æŒ‡å®šæœ¬åœ°æ¨¡å‹è·¯å¾„æˆ–è€…modelscopeä¸Šçš„æ¨¡å‹ID</p></li>
<li><p>eval_backend: å¯é€‰ Native, OpenCompass, VLMEvalKitï¼Œé»˜è®¤ä¸º Native</p></li>
<li><p>infer_backend: å¯é€‰ transformers, vllm, sglang, lmdeployï¼Œé»˜è®¤ä¸º transformers</p></li>
<li><p>eval_limit: æ¯ä¸ªè¯„æµ‹é›†çš„é‡‡æ ·æ•°ï¼Œé»˜è®¤ä¸ºNoneï¼Œè¡¨ç¤ºä½¿ç”¨å…¨éƒ¨æ•°æ®ï¼Œå¯ç”¨äºå¿«é€ŸéªŒè¯</p></li>
<li><p>eval_dataset: è¯„æµ‹æ•°æ®é›†ï¼Œå¯è®¾ç½®å¤šä¸ªæ•°æ®é›†ï¼Œç”¨ç©ºæ ¼åˆ†å‰²</p></li>
</ul>
<p><strong>å¤æ‚è¯„æµ‹ç¤ºä¾‹</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
swift<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model<span class="w"> </span>Qwen/Qwen2.5-0.5B-Instruct<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_backend<span class="w"> </span>Native<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--infer_backend<span class="w"> </span>transformers<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_limit<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset<span class="w"> </span>gsm8k<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset_args<span class="w"> </span><span class="s1">&#39;{&quot;gsm8k&quot;: {&quot;few_shot_num&quot;: 0, &quot;filters&quot;: {&quot;remove_until&quot;: &quot;&lt;/think&gt;&quot;}}}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_generation_config<span class="w"> </span><span class="s1">&#39;{&quot;max_tokens&quot;: 512, &quot;temperature&quot;: 0}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--extra_eval_args<span class="w"> </span><span class="s1">&#39;{&quot;ignore_errors&quot;: true, &quot;debug&quot;: true}&#39;</span>
</pre></div>
</div>
<p>è¯¦ç»†è¯„æµ‹çš„å‚æ•°åˆ—è¡¨å¯ä»¥å‚è€ƒ<a class="reference external" href="Command-line-parameters.md#%E8%AF%84%E6%B5%8B%E5%8F%82%E6%95%B0">è¿™é‡Œ</a>ã€‚</p>
</section>
<section id="id5">
<h2>è®­ç»ƒä¸­è¯„æµ‹<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h2>
<p>SWIFTæ”¯æŒåœ¨è®­ç»ƒè¿‡ç¨‹ä¸­ä½¿ç”¨EvalScopeå¯¹å½“å‰çš„æ¨¡å‹è¿›è¡Œè¯„æµ‹ï¼Œä»¥ä¾¿åŠæ—¶äº†è§£æ¨¡å‹çš„è®­ç»ƒæ•ˆæœã€‚</p>
<p><strong>åŸºæœ¬ç¤ºä¾‹</strong></p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
swift<span class="w"> </span>sft<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--model<span class="w"> </span><span class="s2">&quot;Qwen/Qwen2.5-0.5B-Instruct&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--tuner_type<span class="w"> </span><span class="s2">&quot;lora&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--dataset<span class="w"> </span><span class="s2">&quot;AI-ModelScope/alpaca-gpt4-data-zh#100&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--torch_dtype<span class="w"> </span><span class="s2">&quot;bfloat16&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--num_train_epochs<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--per_device_train_batch_size<span class="w"> </span><span class="s2">&quot;1&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--learning_rate<span class="w"> </span><span class="s2">&quot;1e-4&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--lora_rank<span class="w"> </span><span class="s2">&quot;8&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--lora_alpha<span class="w"> </span><span class="s2">&quot;32&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--target_modules<span class="w"> </span><span class="s2">&quot;all-linear&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--gradient_accumulation_steps<span class="w"> </span><span class="s2">&quot;16&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--save_steps<span class="w"> </span><span class="s2">&quot;50&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--save_total_limit<span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--logging_steps<span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--max_length<span class="w"> </span><span class="s2">&quot;2048&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_strategy<span class="w"> </span><span class="s2">&quot;steps&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_steps<span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--per_device_eval_batch_size<span class="w"> </span><span class="s2">&quot;5&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_use_evalscope<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_dataset<span class="w"> </span><span class="s2">&quot;gsm8k&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_dataset_args<span class="w"> </span><span class="s1">&#39;{&quot;gsm8k&quot;: {&quot;few_shot_num&quot;: 0}}&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--eval_limit<span class="w"> </span><span class="s2">&quot;10&quot;</span>
</pre></div>
</div>
<p>æ³¨æ„å¯åŠ¨å‘½ä»¤ä¸º<code class="docutils literal notranslate"><span class="pre">sft</span></code>ï¼Œå…¶ä¸­evalç›¸å…³çš„å‚æ•°æœ‰ï¼š</p>
<ul class="simple">
<li><p>eval_strategy: è¯„ä¼°ç­–ç•¥ã€‚é»˜è®¤ä¸ºNoneï¼Œè·Ÿéš<code class="docutils literal notranslate"><span class="pre">save_strategy</span></code>çš„ç­–ç•¥</p></li>
<li><p>eval_steps: é»˜è®¤ä¸ºNoneï¼Œå¦‚æœå­˜åœ¨è¯„ä¼°æ•°æ®é›†ï¼Œåˆ™è·Ÿéš<code class="docutils literal notranslate"><span class="pre">save_steps</span></code>çš„ç­–ç•¥</p></li>
<li><p>eval_use_evalscope: æ˜¯å¦ä½¿ç”¨evalscopeè¿›è¡Œè¯„æµ‹ï¼Œéœ€è¦è®¾ç½®è¯¥å‚æ•°æ¥å¼€å¯è¯„æµ‹</p></li>
<li><p>eval_dataset: è¯„æµ‹æ•°æ®é›†ï¼Œå¯è®¾ç½®å¤šä¸ªæ•°æ®é›†ï¼Œç”¨ç©ºæ ¼åˆ†å‰²</p></li>
<li><p>eval_dataset_args: è¯„æµ‹æ•°æ®é›†å‚æ•°ï¼Œjsonæ ¼å¼ï¼Œå¯è®¾ç½®å¤šä¸ªæ•°æ®é›†çš„å‚æ•°</p></li>
<li><p>eval_limit: è¯„æµ‹æ•°æ®é›†é‡‡æ ·æ•°</p></li>
<li><p>eval_generation_config: è¯„æµ‹æ—¶æ¨¡å‹æ¨ç†é…ç½®ï¼Œjsonæ ¼å¼ï¼Œé»˜è®¤ä¸º<code class="docutils literal notranslate"><span class="pre">{'max_tokens':</span> <span class="pre">512}</span></code></p></li>
</ul>
<p>æ›´å¤šè¯„æµ‹çš„æ ·ä¾‹å¯ä»¥å‚è€ƒ<a class="reference external" href="https://github.com/modelscope/ms-swift/tree/main/examples/eval">examples</a></p>
</section>
<section id="id6">
<h2>è‡ªå®šä¹‰è¯„æµ‹é›†<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h2>
<p>æœ¬æ¡†æ¶æ”¯æŒé€‰æ‹©é¢˜å’Œé—®ç­”é¢˜ï¼Œä¸¤ç§é¢„å®šä¹‰çš„æ•°æ®é›†æ ¼å¼ï¼Œä½¿ç”¨æµç¨‹å¦‚ä¸‹ï¼š</p>
<p><em>æ³¨æ„ï¼šä½¿ç”¨è‡ªå®šä¹‰è¯„æµ‹æ—¶ï¼Œeval_backendå‚æ•°å¿…é¡»ä¸ºNative</em></p>
<section id="mcq">
<h3>é€‰æ‹©é¢˜æ ¼å¼ï¼ˆMCQï¼‰<a class="headerlink" href="#mcq" title="Link to this heading">ïƒ</a></h3>
<p>é€‚åˆç”¨æˆ·æ˜¯é€‰æ‹©é¢˜çš„åœºæ™¯ï¼Œè¯„æµ‹æŒ‡æ ‡ä¸ºå‡†ç¡®ç‡ï¼ˆaccuracyï¼‰ã€‚</p>
<p><strong>æ•°æ®å‡†å¤‡</strong></p>
<p>å‡†å¤‡é€‰æ‹©é¢˜æ ¼å¼çš„csvæ–‡ä»¶ï¼Œè¯¥ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>mcq/
â”œâ”€â”€ example_dev.csv  # ï¼ˆå¯é€‰ï¼‰æ–‡ä»¶åç»„æˆä¸º`{subset_name}_dev.csv`ï¼Œç”¨äºfewshotè¯„æµ‹
â””â”€â”€ example_val.csv  # æ–‡ä»¶åç»„æˆä¸º`{subset_name}_val.csv`ï¼Œç”¨äºå®é™…è¯„æµ‹çš„æ•°æ®
</pre></div>
</div>
<p>å…¶ä¸­csvæ–‡ä»¶éœ€è¦ä¸ºä¸‹é¢çš„æ ¼å¼ï¼š</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>id,question,A,B,C,D,answer
1,é€šå¸¸æ¥è¯´ï¼Œç»„æˆåŠ¨ç‰©è›‹ç™½è´¨çš„æ°¨åŸºé…¸æœ‰____,4ç§,22ç§,20ç§,19ç§,C
2,è¡€æ¶²å†…å­˜åœ¨çš„ä¸‹åˆ—ç‰©è´¨ä¸­ï¼Œä¸å±äºä»£è°¢ç»ˆäº§ç‰©çš„æ˜¯____ã€‚,å°¿ç´ ,å°¿é…¸,ä¸™é…®é…¸,äºŒæ°§åŒ–ç¢³,C
</pre></div>
</div>
<p>å…¶ä¸­ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>æ˜¯åºå·ï¼ˆå¯é€‰ï¼‰</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">question</span></code>æ˜¯é—®é¢˜</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">A</span></code>, <code class="docutils literal notranslate"><span class="pre">B</span></code>, <code class="docutils literal notranslate"><span class="pre">C</span></code>, <code class="docutils literal notranslate"><span class="pre">D</span></code>ç­‰æ˜¯å¯é€‰é¡¹ï¼Œæœ€å¤§æ”¯æŒ10ä¸ªé€‰é¡¹</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">answer</span></code>æ˜¯æ­£ç¡®é€‰é¡¹</p></li>
</ul>
<p><strong>å¯åŠ¨è¯„æµ‹</strong></p>
<p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
swift<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model<span class="w"> </span>Qwen/Qwen2.5-0.5B-Instruct<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_backend<span class="w"> </span>Native<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--infer_backend<span class="w"> </span>transformers<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset<span class="w"> </span>general_mcq<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset_args<span class="w"> </span><span class="s1">&#39;{&quot;general_mcq&quot;: {&quot;local_path&quot;: &quot;/path/to/mcq&quot;, &quot;subset_list&quot;: [&quot;example&quot;]}}&#39;</span>
</pre></div>
</div>
<p>å…¶ä¸­ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eval_dataset</span></code> éœ€è¦è®¾ç½®ä¸º <code class="docutils literal notranslate"><span class="pre">general_mcq</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_dataset_args</span></code> éœ€è¦è®¾ç½®</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">local_path</span></code> è‡ªå®šä¹‰æ•°æ®é›†æ–‡ä»¶å¤¹è·¯å¾„</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subset_list</span></code> è¯„æµ‹æ•°æ®é›†åç§°ï¼Œä¸Šè¿° <code class="docutils literal notranslate"><span class="pre">*_dev.csv</span></code> ä¸­çš„ <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Model               | Dataset     | Metric          | Subset   |   Num |   Score | Cat.0   |
+=====================+=============+=================+==========+=======+=========+=========+
| Qwen2-0.5B-Instruct | general_mcq | AverageAccuracy | example  |    12 |  0.5833 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
</pre></div>
</div>
</section>
</section>
<section id="qa">
<h2>é—®ç­”é¢˜æ ¼å¼ï¼ˆQAï¼‰<a class="headerlink" href="#qa" title="Link to this heading">ïƒ</a></h2>
<p>é€‚åˆç”¨æˆ·æ˜¯é—®ç­”é¢˜çš„åœºæ™¯ï¼Œè¯„æµ‹æŒ‡æ ‡æ˜¯<code class="docutils literal notranslate"><span class="pre">ROUGE</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">BLEU</span></code>ã€‚</p>
<p><strong>æ•°æ®å‡†å¤‡</strong></p>
<p>å‡†å¤‡ä¸€ä¸ªé—®ç­”é¢˜æ ¼å¼çš„jsonlineæ–‡ä»¶ï¼Œè¯¥ç›®å½•åŒ…å«äº†ä¸€ä¸ªæ–‡ä»¶ï¼š</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>qa/
â””â”€â”€ example.jsonl
</pre></div>
</div>
<p>è¯¥jsonlineæ–‡ä»¶éœ€è¦ä¸ºä¸‹é¢çš„æ ¼å¼ï¼š</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ä¸­å›½çš„é¦–éƒ½æ˜¯å“ªé‡Œï¼Ÿ&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ä¸­å›½çš„é¦–éƒ½æ˜¯åŒ—äº¬&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ä¸–ç•Œä¸Šæœ€é«˜çš„å±±æ˜¯å“ªåº§å±±ï¼Ÿ&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;æ˜¯ç ç©†æœ—ç›å³°&quot;</span><span class="p">}</span>
<span class="p">{</span><span class="nt">&quot;query&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ä¸ºä»€ä¹ˆåŒ—æè§ä¸åˆ°ä¼é¹…ï¼Ÿ&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;response&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;å› ä¸ºä¼é¹…å¤§å¤šç”Ÿæ´»åœ¨å—æ&quot;</span><span class="p">}</span>
</pre></div>
</div>
<p><strong>å¯åŠ¨è¯„æµ‹</strong></p>
<p>è¿è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">CUDA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">0</span><span class="w"> </span><span class="se">\</span>
swift<span class="w"> </span><span class="nb">eval</span><span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--model<span class="w"> </span>Qwen/Qwen2.5-0.5B-Instruct<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_backend<span class="w"> </span>Native<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--infer_backend<span class="w"> </span>transformers<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset<span class="w"> </span>general_qa<span class="w"> </span><span class="se">\</span>
<span class="w">    </span>--eval_dataset_args<span class="w"> </span><span class="s1">&#39;{&quot;general_qa&quot;: {&quot;local_path&quot;: &quot;/path/to/qa&quot;, &quot;subset_list&quot;: [&quot;example&quot;]}}&#39;</span>
</pre></div>
</div>
<p>å…¶ä¸­ï¼š</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">eval_dataset</span></code> éœ€è¦è®¾ç½®ä¸º <code class="docutils literal notranslate"><span class="pre">general_qa</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval_dataset_args</span></code> æ˜¯ä¸€ä¸ªjsonå­—ç¬¦ä¸²ï¼Œéœ€è¦è®¾ç½®ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">local_path</span></code> è‡ªå®šä¹‰æ•°æ®é›†æ–‡ä»¶å¤¹è·¯å¾„</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">subset_list</span></code> è¯„æµ‹æ•°æ®é›†åç§°ï¼Œä¸Šè¿° <code class="docutils literal notranslate"><span class="pre">*.jsonl</span></code> ä¸­çš„ <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</li>
</ul>
<p><strong>è¿è¡Œç»“æœ</strong></p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Model               | Dataset     | Metric          | Subset   |   Num |   Score | Cat.0   |
+=====================+=============+=================+==========+=======+=========+=========+
| Qwen2-0.5B-Instruct | general_qa  | bleu-1          | default  |    12 |  0.2324 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | bleu-2          | default  |    12 |  0.1451 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | bleu-3          | default  |    12 |  0.0625 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | bleu-4          | default  |    12 |  0.0556 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-1-f       | default  |    12 |  0.3441 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-1-p       | default  |    12 |  0.2393 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-1-r       | default  |    12 |  0.8889 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-2-f       | default  |    12 |  0.2062 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-2-p       | default  |    12 |  0.1453 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-2-r       | default  |    12 |  0.6167 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-l-f       | default  |    12 |  0.333  | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-l-p       | default  |    12 |  0.2324 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
| Qwen2-0.5B-Instruct | general_qa  | rouge-l-r       | default  |    12 |  0.8889 | default |
+---------------------+-------------+-----------------+----------+-------+---------+---------+
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2024, Ascendã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>