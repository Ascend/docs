

<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="../../../../../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ä½¿ç”¨Tuners &mdash; æ˜‡è…¾å¼€æº  æ–‡æ¡£</title>
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/css/theme.css?v=9edc463e" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/custom.css?v=f2aa3e58" />
      <link rel="stylesheet" type="text/css" href="../../../../../../_static/sphinx-design.min.css?v=95c83b7e" />

  
      <script src="../../../../../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../../../../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../../../../../_static/documentation_options.js?v=7d86a446"></script>
      <script src="../../../../../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../../../../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../../../../../../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../../../../../../_static/copybutton.js?v=f281be69"></script>
      <script src="../../../../../../_static/package_info.js?v=2b3ed588"></script>
      <script src="../../../../../../_static/statistics.js?v=da671b53"></script>
      <script src="../../../../../../_static/translations.js?v=beaddf03"></script>
      <script src="../../../../../../_static/design-tabs.js?v=f930bc37"></script>
    <script src="../../../../../../_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="../../../../../../genindex.html" />
    <link rel="search" title="æœç´¢" href="../../../../../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../../../index.html" class="icon icon-home">
            æ˜‡è…¾å¼€æº
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../../../search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">ğŸ å¼€å§‹ä½¿ç”¨</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ascend/quick_install.html">å¿«é€Ÿå®‰è£…æ˜‡è…¾ç¯å¢ƒ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ—ï¸  åŸºç¡€è®¾æ–½ä¸æ¡†æ¶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../accelerate/index.html">Accelerate</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../deepspeed/index.html">DeepSpeed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../kernels/index.html">kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../pytorch/index.html">PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../transformers/index.html">Transformers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ§  è®­ç»ƒä¸å¾®è°ƒæ¡†æ¶</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../LLaMA-Factory/index.html">LLaMA-Factory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../ms-swift/index.html">ms-swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../roll/index.html">ROLL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../torchtitan/index.html">TorchTitan</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../trl/index.html">Transformer Reinforcement Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../VeOmni/index.html">VeOmni</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../verl/index.html">verl</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸš€ æ¨ç†ä¸æœåŠ¡</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../llama_cpp/index.html">Llama.cpp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lm_deploy/index.html">LMDeploy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../onnxruntime/index.html">ONNX Runtime</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sentence_transformers/index.html">Sentence Transformers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sglang/index.html">SGLang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../torchchat/index.html">Torchchat</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ¨ å¤šæ¨¡æ€ã€åº”ç”¨ä¸è¯„æµ‹</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../../Diffusers/index.html">Diffusers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lm_evaluation/index.html">LM-Evalution-Harness</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../open_clip/index.html">open_clip</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../opencompass/index.html">OpenCompass</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../opencv/index.html">OpenCV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../sd_webui/index.html">Stable-Diffusion-WebUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../timm/index.html">timm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../wenet/index.html">WeNet</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../whisper_cpp/index.html">Whisper.cpp</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../../../index.html">æ˜‡è…¾å¼€æº</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">ä½¿ç”¨Tuners</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../../../_sources/sources/_generated/sources/ms-swift/source/Instruction/Use-tuners.md.txt" rel="nofollow"> æŸ¥çœ‹é¡µé¢æºç </a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tuners">
<h1>ä½¿ç”¨Tuners<a class="headerlink" href="#tuners" title="Link to this heading">ïƒ</a></h1>
<p>tuneræ˜¯æŒ‡é™„åŠ åœ¨æ¨¡å‹ä¸Šçš„é¢å¤–ç»“æ„éƒ¨åˆ†ï¼Œç”¨äºå‡å°‘è®­ç»ƒå‚æ•°é‡æˆ–è€…æé«˜è®­ç»ƒç²¾åº¦ã€‚ç›®å‰SWIFTæ”¯æŒçš„tunersæœ‰ï¼š</p>
<ul class="simple">
<li><p>LoRA: <a class="reference external" href="https://arxiv.org/abs/2106.09685">LORA: LOW-RANK ADAPTATION OF LARGE LANGUAGE MODELS</a></p></li>
<li><p>LoRA+: <a class="reference external" href="https://arxiv.org/pdf/2402.12354.pdf">LoRA+: Efficient Low Rank Adaptation of Large Models</a></p></li>
<li><p>LLaMA PRO: <a class="reference external" href="https://arxiv.org/pdf/2401.02415.pdf">LLAMA PRO: Progressive LLaMA with Block Expansion</a></p></li>
<li><p>GaLore/Q-GaLore: <a class="reference external" href="https://arxiv.org/abs/2403.03507">GaLore: Memory-Efficient LLM Training by Gradient Low-Rank Projection</a></p></li>
<li><p>Liger Kernel: <a class="reference external" href="https://arxiv.org/abs/2410.10989">Liger Kernel: Efficient Triton Kernels for LLM Training</a></p></li>
<li><p>LISA: <a class="reference external" href="https://arxiv.org/abs/2403.17919">LISA: Layerwise Importance Sampling for Memory-Efficient Large Language Model Fine-Tuning</a></p></li>
<li><p>UnSloth: https://github.com/unslothai/unsloth</p></li>
<li><p>SCEdit: <a class="reference external" href="https://arxiv.org/abs/2312.11392">SCEdit: Efficient and Controllable Image Diffusion Generation via Skip Connection Editing</a>  &lt; <a class="reference external" href="https://arxiv.org/abs/2312.11392">arXiv</a>  |  <a class="reference external" href="https://scedit.github.io/">Project Page</a> &gt;</p></li>
<li><p>NEFTune: <a class="reference external" href="https://arxiv.org/abs/2310.05914">Noisy Embeddings Improve Instruction Finetuning</a></p></li>
<li><p>LongLoRA: <a class="reference external" href="https://arxiv.org/abs/2309.12307">Efficient Fine-tuning of Long-Context Large Language Models</a></p></li>
<li><p>Adapter: <a class="reference external" href="http://arxiv.org/abs/1902.00751">Parameter-Efficient Transfer Learning for NLP</a></p></li>
<li><p>Vision Prompt Tuning: <a class="reference external" href="https://arxiv.org/abs/2203.12119">Visual Prompt Tuning</a></p></li>
<li><p>Side: <a class="reference external" href="https://arxiv.org/abs/1912.13503">Side-Tuning: A Baseline for Network Adaptation via Additive Side Networks</a></p></li>
<li><p>Res-Tuning: <a class="reference external" href="https://arxiv.org/abs/2310.19859">Res-Tuning: A Flexible and Efficient Tuning Paradigm via Unbinding Tuner from Backbone</a>  &lt; <a class="reference external" href="https://arxiv.org/abs/2310.19859">arXiv</a>  |  <a class="reference external" href="https://res-tuning.github.io/">Project Page</a> &gt;</p></li>
<li><p><a class="reference external" href="https://github.com/huggingface/peft">PEFT</a>æä¾›çš„tuners, å¦‚AdaLoRAã€DoRAã€Fourierftç­‰</p></li>
</ul>
<section id="id1">
<h2>æ¥å£åˆ—è¡¨<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h2>
<section id="swift">
<h3>Swiftç±»é™æ€æ¥å£<a class="headerlink" href="#swift" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.prepare_model(model,</span> <span class="pre">config,</span> <span class="pre">**kwargs)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šåŠ è½½æŸä¸ªtuneråˆ°æ¨¡å‹ä¸Šï¼Œå¦‚æœæ˜¯PeftConfigçš„å­ç±»ï¼Œåˆ™ä½¿ç”¨Peftåº“çš„å¯¹åº”æ¥å£åŠ è½½tunerã€‚åœ¨ä½¿ç”¨SwiftConfigçš„æƒ…å†µä¸‹ï¼Œæœ¬æ¥å£å¯ä»¥ä¼ å…¥SwiftModelå®ä¾‹å¹¶é‡å¤è°ƒç”¨ï¼Œæ­¤æ—¶å’Œconfigä¼ å…¥å­—å…¸çš„æ•ˆæœç›¸åŒã€‚</p>
<ul>
<li><p>æœ¬æ¥å£æ”¯æŒå¹¶è¡ŒåŠ è½½ä¸åŒç±»å‹çš„å¤šä¸ªtunerså…±åŒä½¿ç”¨</p></li>
</ul>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">model</span></code>: <code class="docutils literal notranslate"><span class="pre">torch.nn.Module</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>çš„å®ä¾‹ï¼Œè¢«åŠ è½½çš„æ¨¡å‹</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">config</span></code>: <code class="docutils literal notranslate"><span class="pre">SwiftConfig</span></code>ã€<code class="docutils literal notranslate"><span class="pre">PeftConfig</span></code>çš„å®ä¾‹ï¼Œæˆ–è€…ä¸€ä¸ªè‡ªå®šä¹‰tuneråç§°å¯¹configçš„å­—å…¸</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼š<code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">PeftModel</span></code>çš„å®ä¾‹</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.merge_and_unload(model)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šå°†LoRA weightsåˆå¹¶å›åŸæ¨¡å‹ï¼Œå¹¶å°†LoRAéƒ¨åˆ†å®Œå…¨å¸è½½</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>model: <code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">PeftModel</span></code>çš„å®ä¾‹ï¼Œå·²åŠ è½½LoRAçš„æ¨¡å‹å®ä¾‹</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.merge(model)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šå°†LoRA weightsåˆå¹¶å›åŸæ¨¡å‹ï¼Œä¸å¸è½½LoRAéƒ¨åˆ†</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>model: <code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">PeftModel</span></code>çš„å®ä¾‹ï¼Œå·²åŠ è½½LoRAçš„æ¨¡å‹å®ä¾‹</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.unmerge(model)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šå°†LoRA weightsä»åŸæ¨¡å‹weightsä¸­æ‹†åˆ†å›LoRAç»“æ„</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>model: <code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">PeftModel</span></code>çš„å®ä¾‹ï¼Œå·²åŠ è½½LoRAçš„æ¨¡å‹å®ä¾‹</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.save_to_peft_format(ckpt_dir,</span> <span class="pre">output_dir)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šå°†å­˜å‚¨çš„LoRA checkpointè½¬æ¢ä¸ºPeftå…¼å®¹çš„æ ¼å¼ã€‚ä¸»è¦æ”¹å˜æœ‰ï¼š</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>ä¼šä»å¯¹åº”çš„<code class="docutils literal notranslate"><span class="pre">default</span></code>æ–‡ä»¶å¤¹ä¸­æ‹†åˆ†åˆ°output_diræ ¹ç›®å½•ä¸­</p></li>
<li><p>weightsä¸­çš„<code class="docutils literal notranslate"><span class="pre">{tuner_name}.</span></code>å­—æ®µä¼šè¢«ç§»é™¤ï¼Œå¦‚<code class="docutils literal notranslate"><span class="pre">model.layer.0.self.in_proj.lora_A.default.weight</span></code>ä¼šå˜ä¸º<code class="docutils literal notranslate"><span class="pre">model.layer.0.self.in_proj.lora_A.weight</span></code></p></li>
<li><p>weightsä¸­çš„keyä¼šå¢åŠ <code class="docutils literal notranslate"><span class="pre">basemodel.model</span></code>å‰ç¼€</p></li>
<li><p>æ³¨æ„ï¼šåªæœ‰LoRAå¯ä»¥è¢«è½¬æ¢ï¼Œå…¶ä»–ç±»å‹tunerç”±äºPeftæœ¬èº«ä¸æ”¯æŒï¼Œå› æ­¤ä¼šæŠ¥è½¬æ¢é”™è¯¯ã€‚æ­¤å¤–ï¼Œç”±äºLoRAConfigä¸­å­˜åœ¨é¢å¤–å‚æ•°ï¼Œå¦‚<code class="docutils literal notranslate"><span class="pre">dtype</span></code>ï¼Œå› æ­¤åœ¨è¿™äº›å‚æ•°æœ‰è®¾å®šçš„æƒ…å†µä¸‹ï¼Œä¸æ”¯æŒè½¬æ¢ä¸ºPeftæ ¼å¼ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨åˆ é™¤adapter_config.jsonä¸­çš„å¯¹åº”å­—æ®µ</p></li>
</ul>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>ckpt_dirï¼šåŸweightsç›®å½•</p></li>
<li><p>output_dirï¼šç›®æ ‡weightsç›®å½•</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">Swift.from_pretrained(model,</span> <span class="pre">model_id,</span> <span class="pre">adapter_name,</span> <span class="pre">revision,</span> <span class="pre">**kwargs)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šä»å­˜å‚¨çš„weightsç›®å½•ä¸­åŠ è½½èµ·tuneråˆ°æ¨¡å‹ä¸Šï¼Œå¦‚æœadapter_nameä¸ä¼ ï¼Œåˆ™ä¼šå°†model_idç›®å½•ä¸‹æ‰€æœ‰çš„tunerséƒ½åŠ è½½èµ·æ¥ã€‚åŒ<code class="docutils literal notranslate"><span class="pre">prepare_model</span></code>ç›¸åŒï¼Œæœ¬æ¥å£å¯ä»¥é‡å¤è°ƒç”¨</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>modelï¼š<code class="docutils literal notranslate"><span class="pre">torch.nn.Module</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">SwiftModel</span></code>çš„å®ä¾‹ï¼Œè¢«åŠ è½½çš„æ¨¡å‹</p></li>
<li><p>model_idï¼š<code class="docutils literal notranslate"><span class="pre">str</span></code>ç±»å‹ï¼Œå¾…åŠ è½½çš„tuner checkpointï¼Œ å¯ä»¥æ˜¯é­”æ­hubçš„idï¼Œæˆ–è€…è®­ç»ƒäº§å‡ºçš„æœ¬åœ°ç›®å½•</p></li>
<li><p>adapter_nameï¼š<code class="docutils literal notranslate"><span class="pre">str</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">Dict[str,</span> <span class="pre">str]</span></code>ç±»å‹æˆ–<code class="docutils literal notranslate"><span class="pre">None</span></code>ï¼Œå¾…åŠ è½½tunerç›®å½•ä¸­çš„tuneråç§°ï¼Œå¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">None</span></code>åˆ™åŠ è½½æ‰€æœ‰åç§°çš„tunersï¼Œå¦‚æœæ˜¯<code class="docutils literal notranslate"><span class="pre">str</span></code>æˆ–<code class="docutils literal notranslate"><span class="pre">List[str]</span></code>åˆ™åªåŠ è½½æŸäº›å…·ä½“çš„tunerï¼Œå¦‚æœæ˜¯<code class="docutils literal notranslate"><span class="pre">Dict</span></code>ï¼Œåˆ™å°†<code class="docutils literal notranslate"><span class="pre">key</span></code>æŒ‡ä»£çš„tuneråŠ è½½èµ·æ¥åæ¢æˆ<code class="docutils literal notranslate"><span class="pre">value</span></code>çš„åå­—</p></li>
<li><p>revision: å¦‚æœmodel_idæ˜¯é­”æ­çš„idï¼Œåˆ™revisionå¯ä»¥æŒ‡å®šå¯¹åº”ç‰ˆæœ¬å·</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</section>
<section id="swiftmodel">
<h3>SwiftModelæ¥å£<a class="headerlink" href="#swiftmodel" title="Link to this heading">ïƒ</a></h3>
<p>ä¸‹é¢åˆ—å‡ºç”¨æˆ·å¯èƒ½è°ƒç”¨çš„æ¥å£åˆ—è¡¨ï¼Œå…¶ä»–å†…éƒ¨æ¥å£æˆ–ä¸æ¨èä½¿ç”¨çš„æ¥å£å¯ä»¥é€šè¿‡<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs</span></code>å‘½ä»¤æŸ¥çœ‹API Docæ–‡æ¡£ã€‚</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.create_optimizer_param_groups(self,</span> <span class="pre">**defaults)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šæ ¹æ®åŠ è½½çš„tunersåˆ›å»ºparameter groupsï¼Œç›®å‰ä»…å¯¹<code class="docutils literal notranslate"><span class="pre">LoRA+</span></code>ç®—æ³•æœ‰ä½œç”¨</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>defaultsï¼š<code class="docutils literal notranslate"><span class="pre">optimizer_groups</span></code>çš„é»˜è®¤å‚æ•°ï¼Œå¦‚<code class="docutils literal notranslate"><span class="pre">lr</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">weight_decay</span></code></p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼š</p>
<ul>
<li><p>åˆ›å»ºçš„<code class="docutils literal notranslate"><span class="pre">optimizer_groups</span></code></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.add_weighted_adapter(self,</span> <span class="pre">...)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šå°†å·²æœ‰çš„LoRA tunersåˆå¹¶ä¸ºä¸€ä¸ª</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>æœ¬æ¥å£æ˜¯PeftModel.add_weighted_adapterçš„é€ä¼ ï¼Œå‚æ•°å¯ä»¥å‚è€ƒï¼š<a class="reference external" href="https://huggingface.co/docs/peft/main/en/package_reference/lora#peft.LoraModel.add_weighted_adapter">add_weighted_adapteræ–‡æ¡£</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.save_pretrained(self,</span> <span class="pre">save_directory,</span> <span class="pre">safe_serialization,</span> <span class="pre">adapter_name)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šå­˜å‚¨tuner weights</p></li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>save_directoryï¼šå­˜å‚¨ç›®å½•</p></li>
<li><p>safe_serializationï¼š æ˜¯å¦ä½¿ç”¨safe_tensorsï¼Œé»˜è®¤ä¸ºFalse</p></li>
<li><p>adapter_nameï¼šå­˜å‚¨çš„adapter tunerï¼Œå¦‚æœä¸ä¼ åˆ™é»˜è®¤å­˜å‚¨æ‰€æœ‰çš„tuners</p></li>
</ul>
</li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.set_active_adapters(self,</span> <span class="pre">adapter_names,</span> <span class="pre">offload=None)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šè®¾ç½®å½“å‰æ¿€æ´»çš„adaptersï¼Œä¸åœ¨åˆ—è¡¨ä¸­çš„adaptersä¼šè¢«å¤±æ´»</p>
<ul>
<li><p>åœ¨<code class="docutils literal notranslate"><span class="pre">æ¨ç†</span></code>æ—¶æ”¯æŒç¯å¢ƒå˜é‡<code class="docutils literal notranslate"><span class="pre">USE_UNIQUE_THREAD=0/1</span></code>ï¼Œé»˜è®¤å€¼<code class="docutils literal notranslate"><span class="pre">1</span></code>ï¼Œå¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">0</span></code>åˆ™set_active_adaptersåªå¯¹å½“å‰çº¿ç¨‹ç”Ÿæ•ˆï¼Œæ­¤æ—¶é»˜è®¤ä½¿ç”¨æœ¬çº¿ç¨‹æ¿€æ´»çš„tunersï¼Œä¸åŒçº¿ç¨‹tunersäº’ä¸å¹²æ‰°</p></li>
</ul>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>adapter_namesï¼šæ¿€æ´»çš„tuners</p></li>
<li><p>offloadï¼šå¤±æ´»çš„adapterså¦‚ä½•å¤„ç†ï¼Œé»˜è®¤ä¸º<code class="docutils literal notranslate"><span class="pre">None</span></code>ä»£è¡¨ç•™åœ¨æ˜¾å­˜ä¸­ï¼ŒåŒæ—¶æ”¯æŒ<code class="docutils literal notranslate"><span class="pre">cpu</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">meta</span></code>ï¼Œä»£è¡¨offloadåˆ°cpuå’Œmetaè®¾å¤‡ä¸­ä»¥å‡è½»æ˜¾å­˜æ¶ˆè€—ï¼Œåœ¨<code class="docutils literal notranslate"><span class="pre">USE_UNIQUE_THREAD=0</span></code>æ—¶offloadä¸è¦ä¼ å€¼ä»¥å…å½±å“å…¶ä»–çº¿ç¨‹</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.activate_adapter(self,</span> <span class="pre">adapter_name)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šæ¿€æ´»ä¸€ä¸ªtuner</p>
<ul>
<li><p>åœ¨<code class="docutils literal notranslate"><span class="pre">æ¨ç†</span></code>æ—¶æ”¯æŒç¯å¢ƒå˜é‡<code class="docutils literal notranslate"><span class="pre">USE_UNIQUE_THREAD=0/1</span></code>ï¼Œé»˜è®¤å€¼<code class="docutils literal notranslate"><span class="pre">1</span></code>ï¼Œå¦‚æœä¸º<code class="docutils literal notranslate"><span class="pre">0</span></code>åˆ™activate_adapteråªå¯¹å½“å‰çº¿ç¨‹ç”Ÿæ•ˆï¼Œæ­¤æ—¶é»˜è®¤ä½¿ç”¨æœ¬çº¿ç¨‹æ¿€æ´»çš„tunersï¼Œä¸åŒçº¿ç¨‹tunersäº’ä¸å¹²æ‰°</p></li>
</ul>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>adapter_nameï¼šå¾…æ¿€æ´»çš„tuneråå­—</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.deactivate_adapter(self,</span> <span class="pre">adapter_name,</span> <span class="pre">offload)</span></code></p>
<ul class="simple">
<li><p>æ¥å£ä½œç”¨ï¼šå¤±æ´»ä¸€ä¸ªtuner</p>
<ul>
<li><p>åœ¨<code class="docutils literal notranslate"><span class="pre">æ¨ç†</span></code>æ—¶ç¯å¢ƒå˜é‡<code class="docutils literal notranslate"><span class="pre">USE_UNIQUE_THREAD=0</span></code>æ—¶ä¸è¦è°ƒç”¨æœ¬æ¥å£</p></li>
</ul>
</li>
<li><p>å‚æ•°ï¼š</p>
<ul>
<li><p>adapter_nameï¼šå¾…å¤±æ´»çš„tuneråå­—</p></li>
<li><p>offloadï¼šå¤±æ´»çš„adapterså¦‚ä½•å¤„ç†ï¼Œé»˜è®¤ä¸º<code class="docutils literal notranslate"><span class="pre">None</span></code>ä»£è¡¨ç•™åœ¨æ˜¾å­˜ä¸­ï¼ŒåŒæ—¶æ”¯æŒ<code class="docutils literal notranslate"><span class="pre">cpu</span></code>å’Œ<code class="docutils literal notranslate"><span class="pre">meta</span></code>ï¼Œä»£è¡¨offloadåˆ°cpuå’Œmetaè®¾å¤‡ä¸­ä»¥å‡è½»æ˜¾å­˜æ¶ˆè€—</p></li>
</ul>
</li>
<li><p>è¿”å›å€¼ï¼šNone</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">SwiftModel.get_trainable_parameters(self)</span></code></p>
<ul>
<li><p>æ¥å£ä½œç”¨ï¼šè¿”å›è®­ç»ƒå‚æ•°ä¿¡æ¯</p></li>
<li><p>å‚æ•°ï¼šæ— </p></li>
<li><p>è¿”å›å€¼ï¼šè®­ç»ƒå‚æ•°ä¿¡æ¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>trainable params: 100M || all params: 1000M || trainable%: 10.00% || cuda memory: 10GiB.
</pre></div>
</div>
</li>
</ul>
</li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ 2024, Ascendã€‚</p>
  </div>

  åˆ©ç”¨ <a href="https://www.sphinx-doc.org/">Sphinx</a> æ„å»ºï¼Œä½¿ç”¨çš„ 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">ä¸»é¢˜</a>
    ç”± <a href="https://readthedocs.org">Read the Docs</a> å¼€å‘.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>